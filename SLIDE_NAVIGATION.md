# Реализация автоматической навигации между слайдами

## Обзор функциональности

Была реализована система автоматической навигации между слайдами с двумя основными функциями:

### 1. Автоматическое определение активного слайда при скролле в canvas

- При прокрутке в области canvas автоматически определяется, какой слайд находится в центре экрана
- Активный слайд в сайдбаре автоматически обновляется для соответствия слайду в центре canvas

### 2. Автоскролл в сайдбаре при навигации

- При добавлении нового слайда автоматически происходит прокрутка к нему в сайдбаре
- При клике на слайд в сайдбаре происходит плавная прокрутка к этому слайду в canvas
- При изменении активного слайда (через скролл в canvas) происходит автоскролл в сайдбаре

## Технические детали

### Новые файлы:

1. **`/src/shared/hooks/useSlideNavigation.ts`** - хук для управления навигацией между слайдами

### Изменения в существующих файлах:

#### SlideCanvas

- Добавлено отслеживание скролла с throttling для производительности
- Реализована логика определения слайда в центре экрана
- Зарегистрирована функция прокрутки в глобальном store для использования сайдбаром
- Убрана возможность клика на слайды для ручной навигации (теперь навигация только через скролл)

#### SlidesSidebar

- Добавлен автоскролл к новым слайдам при их добавлении
- Реализована прокрутка к активному слайду при изменении currentSlide
- При клике на слайд в сайдбаре происходит прокрутка к этому слайду в canvas

#### PresentationStore

- Добавлена функция `scrollToSlideInCanvas` для межкомпонентной связи
- Добавлен метод `setScrollToSlideInCanvas` для регистрации функции прокрутки

### Алгоритм определения активного слайда:

1. При скролле в canvas с throttling (100ms задержка) вызывается функция `findCenterSlide`
2. Функция перебирает все сгенерированные слайды и находит тот, который ближе всего к центру viewport
3. Если найденный слайд отличается от текущего активного, происходит обновление `currentSlide`
4. Изменение `currentSlide` автоматически запускает автоскролл в сайдбаре

### Особенности реализации:

- Используется `useCallback` для оптимизации производительности
- Применяется throttling для scroll событий
- Refs используются для прямого доступа к DOM элементам слайдов
- Плавная анимация прокрутки через `scrollIntoView` с `behavior: 'smooth'`
- Проверка границ viewport в сайдбаре для предотвращения ненужных прокруток

## Пользовательский опыт:

1. **В canvas**: пользователь прокручивает страницу, слайд в центре автоматически становится активным в сайдбаре
2. **В сайдбаре**: при клике на слайд происходит плавная прокрутка к нему в canvas
3. **При добавлении слайда**: автоматическая прокрутка к новому слайду в сайдбаре
4. **Визуальная обратная связь**: активный слайд всегда выделен в сайдбаре
